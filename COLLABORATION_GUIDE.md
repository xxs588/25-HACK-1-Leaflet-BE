# 协作开发最佳实践指南

## 开发环境设置

### 1. 首次设置
```bash
# 克隆项目
git clone <repository-url>
cd 25-HACK-1-Leaflet-BE

# 复制环境配置模板
cp .env.example .env

# 编辑环境配置
# 修改 .env 文件中的数据库密码和其他配置
```

### 2. 环境配置管理
- **开发环境**: 使用 `.env` 文件，配置指向本地数据库
- **容器环境**: 使用环境变量注入，配置指向容器内数据库

## Docker化协作问题解决方案

### 1. 环境配置问题
**问题**: 硬编码的数据库连接配置
**解决方案**: 
- 使用环境变量替代硬编码配置
- 提供配置模板文件
- 支持多环境配置

### 2. 数据库连接问题
**问题**: 容器内无法访问宿主机数据库
**解决方案**:
- 开发环境: 使用 `127.0.0.1` 访问宿主机数据库
- 容器环境: 使用服务名 `mysql` 访问容器内数据库

### 3. 依赖管理
**问题**: 依赖包版本不一致
**解决方案**:
- 使用 `go.mod` 和 `go.sum` 锁定版本

### 4. 构建和部署
- 使用多阶段构建减少镜像大小
- 优化构建缓存提高构建速度

## 开发工作流

### 1. 本地开发
```bash
# 启动本地数据库
# 然后运行应用
go run main.go
```

### 2. 容器化开发
```bash
# 构建和启动完整环境
./docker-dev.sh build
./docker-dev.sh up
```

### 3. 测试和验证
- 单元测试
- 集成测试
- 端到端测试

## 常见问题及解决方案

### 1. 端口冲突
**问题**: 8080端口或3306端口被占用
**解决方案**:
- 修改 `docker-compose.yml` 中的端口映射
- 使用不同的端口进行开发

### 2. 数据库迁移
**问题**: 数据库模式变更
**解决方案**:
- 使用 GORM 的 AutoMigrate 功能
- 提供数据库迁移脚本

### 3. 配置同步
**问题**: 协作者配置不一致
**解决方案**:
- 使用配置模板
- 文档化配置要求

## 最佳实践总结


### 2. 文档维护
- 保持 README 和配置文档更新
